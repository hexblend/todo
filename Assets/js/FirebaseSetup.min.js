function GetDate(){var e=new Date,a=e.getDate(),t=e.getMonth()+1,r=e.getFullYear();return a<10&&(a="0"+a),t<10&&(t="0"+t),r+"-"+t+"-"+a}function AddToList(e){GlobalData.CurrentList[e]={Checked:!1},SetFireBaseList()}function CheckListElem(e){GlobalData.CurrentList[e].Checked=!0,SetFireBaseList()}function UnCheckListElem(e){GlobalData.CurrentList[e].Checked=!1,SetFireBaseList()}function DeleteListElem(e){delete GlobalData.CurrentList[e],SetFireBaseList()}function SetFireBaseList(){firebase.database().ref("/UserLists/"+FB_DATA.UID+"/"+CurrentDate).set(GlobalData.CurrentList)}console.log("Starting Firebase...");var CurrentDate=GetDate(),GlobalData={FirebaseConfig:{apiKey:"AIzaSyA8a6WnwAyOeq61gmtKwS6Oa0TNdY6M5Bo",authDomain:"vladb-todo.firebaseapp.com",databaseURL:"https://vladb-todo.firebaseio.com",projectId:"vladb-todo",storageBucket:"",messagingSenderId:"180513059705"},UserData:null,AllLists:{},CurrentList:{}};GlobalData.CurrentList={},firebase.initializeApp(GlobalData.FirebaseConfig);var Database=firebase.database(),FB_DATA={};firebase.auth().useDeviceLanguage(),firebase.auth().getRedirectResult().then(function(e){e.credential&&(FB_DATA.Token=e.credential.accessToken),FB_DATA.User=e.user,FB_DATA.CurrentUser=firebase.auth().currentUser,FB_DATA.UID=FB_DATA.CurrentUser.uid,firebase.database().ref("/Users/"+FB_DATA.UID).once("value").then(function(e){e.val()?GlobalData.UserData=e.val():(GlobalData.UserData={UID:FB_DATA.UID,Email:FB_DATA.CurrentUser.email,DisplayName:FB_DATA.CurrentUser.displayName,PhoneNumber:FB_DATA.CurrentUser.phoneNumber,ProfilePicture:FB_DATA.CurrentUser.photoURL},firebase.database().ref("/Users/"+FB_DATA.UID).set(GlobalData.UserData))})}).catch(function(e){FB_DATA.Error={Code:e.code,MSG:e.message,Email:e.email,Credential:e.credential},console.error(FB_DATA.Error)}),firebase.auth().onAuthStateChanged(function(e){if(e)if(console.log("User Already Logged In."),"/todo/index.html"==location.pathname||"/todo/index"==location.pathname||"/"==location.pathname)location.pathname="/app.html";else{var a=document.querySelector("#LogOutButton");a&&a.addEventListener("click",function(){firebase.auth().signOut().then(function(){location.pathname="/"}).catch(function(e){console.warn(e)})}),firebase.database().ref("/UserLists/"+FB_DATA.UID).on("value",function(e){e.val()&&(console.log(e.val()),GlobalData.AllLists=e.val(),GlobalData.AllLists[CurrentDate]&&(GlobalData.CurrentList=GlobalData.AllLists[CurrentDate]))})}else if(console.log("User Log In Required."),"/todo/app.html"==location.pathname||"/todo/app"==location.pathname||"/app.html"==location.pathname)location.pathname="/";else{var t=document.querySelector("#LoginButton");t&&t.addEventListener("click",function(){var e=new firebase.auth.GoogleAuthProvider;e.addScope("profile"),e.addScope("email"),firebase.auth().signInWithRedirect(e)})}});