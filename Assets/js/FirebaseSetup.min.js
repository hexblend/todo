function GetDate(){var e=new Date,t=e.getDate(),a=e.getMonth()+1,n=e.getFullYear();return t<10&&(t="0"+t),a<10&&(a="0"+a),n+"-"+a+"-"+t}function AddToList(e){GlobalData.CurrentList[e]={Checked:!1},SetFireBaseList(),AddToPage()}function CheckListElem(e){GlobalData.CurrentList[e].Checked=!0,SetFireBaseList(),AddToPage()}function UnCheckListElem(e){GlobalData.CurrentList[e].Checked=!1,SetFireBaseList(),AddToPage()}function DeleteListElem(e){delete GlobalData.CurrentList[e],SetFireBaseList(),AddToPage()}function DeleteAllElem(){GlobalData.CurrentList={},SetFireBaseList(),AddToPage()}function AddToPage(){list.innerHTML="",done_list.innerHTML="",GlobalData.CurrentList[CurrentDate]={},done_list.style.display="none",document.querySelector(".done_list_title").style.display="none",list.style.display="none",document.querySelector(".todo_list_title").style.display="none",document.querySelector(".end-btn").style.display="none",list_counter=0,list_counter_conatiner.innerHTML=list_counter,done_list_counter=0,done_list_counter_container.innerHTML=done_list_counter;for(k in GlobalData.CurrentList)if(console.log(k),GlobalData.CurrentList[k].Checked);else{var e=GlobalData.CurrentList[k];list.style.display="block",document.querySelector(".todo_list_title").style.display="block";var t=document.createElement("li");t.setAttribute("class","collection-item");var a=document.createElement("div");a.setAttribute("class","row");var n=document.createElement("div");n.setAttribute("class","col s8");var o=document.createElement("div");o.setAttribute("class","col s4");var l=document.createElement("p");l.setAttribute("class","item-text"),l.innerHTML=e;var r=document.createElement("div");r.setAttribute("class","buttons");var i=document.createElement("a");i.setAttribute("class","secondary-content todo_btn");var s=document.createElement("i");s.setAttribute("class","material-icons unchecked-box"),s.innerHTML="check_box_outline_blank";var c=document.createElement("a");c.setAttribute("class","secondary-content delete_btn");var d=document.createElement("i");d.setAttribute("class","material-icons delete-icon"),d.innerHTML="delete";var u=document.createElement("a");u.setAttribute("class","secondary-content done_btn");var m=document.createElement("i");m.setAttribute("class","material-icons checked-box"),m.innerHTML="check_box",c.addEventListener("click",delete_item),i.addEventListener("click",todo_item),u.addEventListener("click",uncheck_elem),c.appendChild(d),i.appendChild(s),u.appendChild(m),r.appendChild(i),r.appendChild(u),r.appendChild(c),o.appendChild(r),n.appendChild(l),a.appendChild(n),a.appendChild(o),t.appendChild(a),u.style.display="none",list.insertBefore(t,list.childNodes[0]),document.querySelector(".end-btn").style.display="inline-block",main_input.value="",(document.querySelector(".dropdown_btn_a").style.display="none")&&(document.querySelector(".dropdown_btn_a").style.display="inline-block"),list_counter+=1,list_counter_conatiner.innerHTML=list_counter}}function SetFireBaseList(){firebase.database().ref("/UserLists/"+FB_DATA.UID+"/"+CurrentDate).set(GlobalData.CurrentList)}console.log("Starting Firebase...");var CurrentDate=GetDate(),GlobalData={FirebaseConfig:{apiKey:"AIzaSyA8a6WnwAyOeq61gmtKwS6Oa0TNdY6M5Bo",authDomain:"vladb-todo.firebaseapp.com",databaseURL:"https://vladb-todo.firebaseio.com",projectId:"vladb-todo",storageBucket:"",messagingSenderId:"180513059705"},UserData:null,AllLists:{},CurrentList:{}};GlobalData.CurrentList={},firebase.initializeApp(GlobalData.FirebaseConfig);var Database=firebase.database(),FB_DATA={};firebase.auth().useDeviceLanguage(),firebase.auth().getRedirectResult().then(function(e){e.credential&&(FB_DATA.Token=e.credential.accessToken),FB_DATA.User=e.user,FB_DATA.CurrentUser=firebase.auth().currentUser,FB_DATA.UID=FB_DATA.CurrentUser.uid,firebase.database().ref("/Users/"+FB_DATA.UID).once("value").then(function(e){e.val()?GlobalData.UserData=e.val():(GlobalData.UserData={UID:FB_DATA.UID,Email:FB_DATA.CurrentUser.email,DisplayName:FB_DATA.CurrentUser.displayName,PhoneNumber:FB_DATA.CurrentUser.phoneNumber,ProfilePicture:FB_DATA.CurrentUser.photoURL},firebase.database().ref("/Users/"+FB_DATA.UID).set(GlobalData.UserData));var t=document.querySelector("#user_image"),a=document.querySelector("#user_name");t&&(t.src=GlobalData.UserData.ProfilePicture),a&&(a.innerText=GlobalData.UserData.DisplayName)})}).catch(function(e){FB_DATA.Error={Code:e.code,MSG:e.message,Email:e.email,Credential:e.credential},console.error(FB_DATA.Error)}),firebase.auth().onAuthStateChanged(function(e){if(e)if(console.log("User Already Logged In."),"/todo/index.html"==location.pathname||"/todo/index"==location.pathname||"/"==location.pathname)location.pathname="/app.html";else{var t=document.querySelector("#LogOutButton");t&&t.addEventListener("click",function(){firebase.auth().signOut().then(function(){location.pathname="/"}).catch(function(e){console.warn(e)})}),firebase.database().ref("/UserLists/"+FB_DATA.UID).on("value",function(e){e.val()&&(console.log(e.val()),GlobalData.AllLists=e.val(),GlobalData.AllLists[CurrentDate]&&(GlobalData.CurrentList=GlobalData.AllLists[CurrentDate]))})}else if(console.log("User Log In Required."),"/todo/app.html"==location.pathname||"/todo/app"==location.pathname||"/app.html"==location.pathname)location.pathname="/";else{var a=document.querySelector("#LoginButton");a&&a.addEventListener("click",function(){var e=new firebase.auth.GoogleAuthProvider;e.addScope("profile"),e.addScope("email"),firebase.auth().signInWithRedirect(e)})}});var list=document.querySelector(".todo-collection"),done_list=document.querySelector(".done-collection"),list_counter=0,done_list_counter=0,list_counter_conatiner=document.querySelector(".todo-counter"),done_list_counter_container=document.querySelector(".done-counter"),main_input=document.querySelector("#add_activity");0==list.children.length&&(list.style.display="none",document.querySelector(".todo_list_title").style.display="none",document.querySelector(".end-btn").style.display="none"),0==done_list.children.length&&(done_list.style.display="none",document.querySelector(".done_list_title").style.display="none");